<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tippspiel</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container ">

    <!-- Tipp abgeben Abschnitt -->
    <div class="mb-3">
        <label for="userGuess" class="form-label">Dein Tipp (1-100):</label>
        <input type="number" id="userGuess" class="form-control" min="1" max="100" />
        <button onclick="submitGuess()" class="btn btn-primary mt-2">Tipp abgeben</button>
        <div id="result" class="mt-3"></div>
    </div>

    <!-- Lotto Quick Pick Abschnitt -->
    <div class="mb-3">
        <label for="lottoUserGuess" class="form-label">Dein Tipp (1-49):</label>
        <input type="text" id="lottoUserGuess" class="form-control" placeholder="Gib deine Zahlen ein (z.B., 1, 5, 10, 25, 42, 49)">
        <button onclick="playCustomLottoQuickPick()" class="btn btn-primary mt-2">Lotto Quick Pick mit Tipp spielen</button>
        <button onclick="playRandomLottoQuickPick()" class="btn btn-secondary mt-2">Lotto Quick Pick ohne Tipp spielen</button>
        <div id="lottoQuickPickResult" class="mt-3"></div>
    </div>

    <!-- Bootstrap JS and Popper.js (required for Bootstrap) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function submitGuess() {
            const userGuess = document.getElementById('userGuess').value;
            getRandomNumber(userGuess);
        }

        function getRandomNumber(userGuess) {
            const apiKey = '3ae6e0db-78d8-413e-9c8d-60aacee5c369';
            let xhr = new XMLHttpRequest();
            const apiUrl = `https://api.random.org/json-rpc/2/invoke`;
            xhr.open('POST', apiUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onload = function () {
                if (xhr.status == 200) {
                    let responseData = JSON.parse(this.response);
                    const randomNumber = responseData.result.random.data[0];
                    displayResult(userGuess, randomNumber);
                } else {
                    console.error('Error:', xhr.statusText);
                }
            };

            const requestBody = {
                "jsonrpc": "2.0",
                "method": "generateIntegers",
                "params": {
                    "apiKey": apiKey,
                    "n": 1,
                    "min": 1,
                    "max": 100,
                    "replacement": true
                },
                "id": 42
            };

            xhr.send(JSON.stringify(requestBody));
        }

        function displayResult(userGuess, randomNumber) {
            const resultContainer = document.getElementById('result');
            const resultText = userGuess == randomNumber
                ? 'Herzlichen Gl√ºckwunsch! Ihr Tipp ist richtig!'
                : `Leider falsch. Die richtige Zahl war ${randomNumber}.`;

            resultContainer.innerHTML = resultText;
        }

        function playCustomLottoQuickPick() {
            const lottoUserGuess = document.getElementById('lottoUserGuess').value;
            playLottoQuickPick(lottoUserGuess);
        }

        function playRandomLottoQuickPick() {
            playLottoQuickPick();
        }

        function playLottoQuickPick(lottoUserGuess) {
            const apiKey = '3ae6e0db-78d8-413e-9c8d-60aacee5c369';
            let xhr = new XMLHttpRequest();
            const apiUrl = `https://api.random.org/json-rpc/2/invoke`;
            xhr.open('POST', apiUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onload = function () {
                if (xhr.status == 200) {
                    let responseData = JSON.parse(this.response);
                    const lottoQuickPickNumbers = responseData.result.random.data;
                    displayLottoQuickPickResult(lottoUserGuess, lottoQuickPickNumbers);
                } else {
                    console.error('Error:', xhr.statusText);
                }
            };

            const requestBody = {
                "jsonrpc": "2.0",
                "method": "generateIntegers",
                "params": {
                    "apiKey": apiKey,
                    "n": 6,
                    "min": 1,
                    "max": 49,
                    "replacement": false
                },
                "id": 42
            };

            xhr.send(JSON.stringify(requestBody));
        }

        function displayLottoQuickPickResult(lottoUserGuess, lottoQuickPickNumbers) {
            const lottoQuickPickResultContainer = document.getElementById('lottoQuickPickResult');
            const lottoUserGuessText = lottoUserGuess ? `Dein Tipp: ${lottoUserGuess}` : "Du hast keinen Tipp abgegeben.";

            lottoQuickPickResultContainer.innerHTML = `${lottoUserGuessText}<br>Lotto Quick Pick: ${lottoQuickPickNumbers.join(', ')}`;
        }
    </script>
</body>
</html>
